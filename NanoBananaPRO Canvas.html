<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NanoBanana Gemini Prompt Canvas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap');

        :root {
            --banana-yellow: #FCD34D;
            --banana-dark: #18181B;
            --banana-panel: #27272A;
        }

        body {
            background-color: #09090b;
            color: #e4e4e7;
            font-family: 'Inter', sans-serif;
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .input-field {
            background-color: #18181b;
            border: 1px solid #3f3f46;
            color: #fff;
            transition: all 0.2s;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--banana-yellow);
            box-shadow: 0 0 0 2px rgba(252, 211, 77, 0.2);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #18181b;
        }
        ::-webkit-scrollbar-thumb {
            background: #3f3f46;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #52525b;
        }

        /* Toggle Switch Styling */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #FCD34D;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #FCD34D;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="border-b border-zinc-800 bg-zinc-900/50 backdrop-blur-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-yellow-400 rounded-lg flex items-center justify-center text-black font-bold text-xl shadow-lg shadow-yellow-400/20">
                    N
                </div>
                <div>
                    <h1 class="font-bold text-lg tracking-tight">NanoBanana <span class="text-yellow-400">Canvas</span></h1>
                    <p class="text-xs text-zinc-500 font-mono">Multi-Reference Prompt Engine</p>
                </div>
            </div>
            <button onclick="clearAll()" class="text-xs font-semibold text-zinc-500 hover:text-red-400 transition-colors">
                RESET CANVAS
            </button>
        </div>
    </header>

    <main class="flex-1 max-w-7xl mx-auto w-full p-4 md:p-6 grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <div class="lg:col-span-7 space-y-6">
            
            <section class="bg-zinc-900 border border-zinc-800 rounded-xl p-5 shadow-sm">
                <div class="flex items-center gap-2 mb-4">
                    <div class="w-1 h-5 bg-yellow-400 rounded-full"></div>
                    <h2 class="font-semibold text-zinc-200">Core Concept</h2>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-medium text-zinc-400 mb-1.5 uppercase tracking-wider">Primary Prompt</label>
                        <textarea id="mainPrompt" rows="3" class="input-field w-full rounded-lg p-3 text-sm placeholder-zinc-600" placeholder="Describe the main subject, action, and context..."></textarea>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-medium text-zinc-400 mb-1.5 uppercase tracking-wider">Art Style</label>
                            <input type="text" id="stylePrompt" class="input-field w-full rounded-lg p-3 text-sm placeholder-zinc-600" placeholder="e.g. Cyberpunk, Watercolor...">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-zinc-400 mb-1.5 uppercase tracking-wider">Aspect Ratio</label>
                            <select id="aspectRatio" class="input-field w-full rounded-lg p-3 text-sm cursor-pointer">
                                <option value="">Default</option>
                                <option value="--ar 16:9">16:9 (Cinematic)</option>
                                <option value="--ar 9:16">9:16 (Portrait)</option>
                                <option value="--ar 1:1">1:1 (Square)</option>
                                <option value="--ar 4:3">4:3 (Photo)</option>
                                <option value="--ar 21:9">21:9 (Ultrawide)</option>
                            </select>
                        </div>
                    </div>

                    <div class="mt-6 pt-6 border-t border-zinc-800">
                        <div class="flex items-center gap-2 mb-4">
                            <div class="w-1 h-5 bg-indigo-500 rounded-full"></div>
                            <h2 class="font-semibold text-zinc-200 text-sm">Camera & Tech Specs</h2>
                        </div>

                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
                            <div>
                                <label class="block text-[10px] font-medium text-zinc-500 mb-1 uppercase">Lens (mm)</label>
                                <select id="camLens" class="input-field w-full rounded-lg p-2 text-xs cursor-pointer">
                                    <option value="">None</option>
                                    <option value="14mm Wide-Angle">14mm (Ultra Wide)</option>
                                    <option value="24mm Wide-Angle">24mm (Landscape)</option>
                                    <option value="35mm Lens">35mm (Street)</option>
                                    <option value="50mm Prime">50mm (Standard)</option>
                                    <option value="85mm Portrait">85mm (Portrait)</option>
                                    <option value="105mm Macro">105mm (Macro)</option>
                                    <option value="135mm Telephoto">135mm (Tele)</option>
                                    <option value="200mm Telephoto">200mm (Zoom)</option>
                                    <option value="400mm Super-Tele">400mm (Wildlife)</option>
                                    <option value="Fisheye Lens">Fisheye</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-[10px] font-medium text-zinc-500 mb-1 uppercase">Aperture</label>
                                <select id="camAperture" class="input-field w-full rounded-lg p-2 text-xs cursor-pointer">
                                    <option value="">None</option>
                                    <option value="f/1.2">f/1.2 (Creamy Bokeh)</option>
                                    <option value="f/1.4">f/1.4 (Low Light)</option>
                                    <option value="f/1.8">f/1.8 (Soft Blur)</option>
                                    <option value="f/2.8">f/2.8 (Sharp Subject)</option>
                                    <option value="f/4.0">f/4.0 (Balanced)</option>
                                    <option value="f/5.6">f/5.6 (Standard)</option>
                                    <option value="f/8.0">f/8.0 (Sharp)</option>
                                    <option value="f/11">f/11 (Deep Focus)</option>
                                    <option value="f/16">f/16 (Everything Sharp)</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-[10px] font-medium text-zinc-500 mb-1 uppercase">Camera Angle</label>
                                <select id="camAngle" class="input-field w-full rounded-lg p-2 text-xs cursor-pointer">
                                    <option value="">None</option>
                                    <option value="Eye-Level Shot">Eye-Level</option>
                                    <option value="Low-Angle Shot">Low-Angle (Heroic)</option>
                                    <option value="High-Angle Shot">High-Angle</option>
                                    <option value="Birds-Eye View">Birds-Eye</option>
                                    <option value="Dutch Angle">Dutch Angle (Tilt)</option>
                                    <option value="Over-the-shoulder">Over-the-Shoulder</option>
                                    <option value="Close-up Shot">Close-up</option>
                                    <option value="Extreme Close-up">Extreme Close-up</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-[10px] font-medium text-zinc-500 mb-1 uppercase">Resolution</label>
                                <select id="camRes" class="input-field w-full rounded-lg p-2 text-xs cursor-pointer">
                                    <option value="">Default</option>
                                    <option value="HD 1K resolution">1K (HD)</option>
                                    <option value="Full HD 2K resolution">2K (FHD)</option>
                                    <option value="4K UHD resolution, highly detailed">4K (UHD)</option>
                                    <option value="8K resolution, ultra-detailed, masterpiece">8K (Max)</option>
                                </select>
                            </div>
                        </div>

                        <div class="flex items-center justify-between bg-black/30 p-3 rounded-lg border border-zinc-700/50">
                            <div>
                                <h4 class="text-sm font-semibold text-zinc-200">TrueSkinâ„¢ Realism Engine</h4>
                                <p class="text-[10px] text-zinc-500">Injects advanced photorealism, pores, & imperfection prompts.</p>
                            </div>
                            
                            <div class="relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in">
                                <input type="checkbox" name="toggle" id="realismToggle" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer border-zinc-700 transition-all duration-300 left-0"/>
                                <label for="realismToggle" class="toggle-label block overflow-hidden h-6 rounded-full bg-zinc-700 cursor-pointer"></label>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4">
                        <label class="block text-xs font-medium text-red-400/80 mb-1.5 uppercase tracking-wider">Negative Prompt (Avoid)</label>
                        <input type="text" id="negPrompt" class="input-field w-full rounded-lg p-3 text-sm placeholder-zinc-600 focus:border-red-400/50" placeholder="blurry, low quality, distortion...">
                    </div>
                </div>
            </section>

            <section class="bg-zinc-900 border border-zinc-800 rounded-xl p-5 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <div class="w-1 h-5 bg-blue-500 rounded-full"></div>
                        <h2 class="font-semibold text-zinc-200">Reference Matrix (14 Slots)</h2>
                    </div>
                    <span class="text-xs px-2 py-1 bg-zinc-800 rounded text-zinc-400">Paste URLs or Descriptions</span>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="referenceGrid">
                    </div>
            </section>

        </div>

        <div class="lg:col-span-5 flex flex-col gap-6 sticky top-24 h-fit">
            
            <section class="bg-zinc-900 border border-zinc-700/50 rounded-xl p-5 shadow-xl relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-400 via-orange-500 to-yellow-400"></div>
                
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-bold text-lg text-white flex items-center gap-2">
                        <svg class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        Compiled Prompt
                    </h2>
                    <span id="charCount" class="text-xs font-mono text-zinc-500">0 chars</span>
                </div>

                <div class="relative">
                    <textarea id="finalOutput" readonly class="w-full h-96 bg-black/40 border border-zinc-700 rounded-lg p-4 font-mono text-sm text-zinc-300 resize-none focus:outline-none focus:border-yellow-500/50" placeholder="Prompt will appear here..."></textarea>
                    
                    <button onclick="copyToClipboard()" class="absolute bottom-4 right-4 bg-yellow-400 hover:bg-yellow-300 text-black font-bold py-2 px-4 rounded shadow-lg transition-transform active:scale-95 flex items-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>
                        Copy Prompt
                    </button>
                </div>
                
                <div class="mt-4 p-3 bg-zinc-800/50 rounded border border-zinc-700/50">
                    <p class="text-xs text-zinc-500">
                        <span class="font-semibold text-zinc-400">Format:</span> [Main] + [Style] + [Tech] + [Realism] + [Refs] + [Neg]
                    </p>
                </div>
            </section>

        </div>
    </main>

    <script>
        // Configuration
        const TOTAL_REFS = 14;

        // The specific realism injection text provided
        const REALISM_TEXT = `Must appear as an authentic photograph taken with a professional camera. Include natural skin texture, pores, and subtle imperfections. Realistic hair strands with natural movement and flyaways. Genuine eye reflections and catchlights. Natural shadows and highlights on face and body. Slight asymmetry in facial features (as real people have). Authentic fabric texture and wrinkles in clothing. No overly smooth or plastic-looking skin. Real-world lighting conditions with appropriate color temperature.`;

        // Initialize UI
        document.addEventListener('DOMContentLoaded', () => {
            generateRefInputs();
            attachListeners();
            updateOutput(); // Initial run
        });

        function generateRefInputs() {
            const container = document.getElementById('referenceGrid');
            let html = '';
            
            for (let i = 1; i <= TOTAL_REFS; i++) {
                html += `
                <div class="relative group">
                    <span class="absolute -top-2 left-2 px-1 bg-zinc-900 text-[10px] font-mono text-zinc-500 group-focus-within:text-blue-400 transition-colors">REF ${i.toString().padStart(2, '0')}</span>
                    <input 
                        type="text" 
                        class="ref-input input-field w-full rounded-lg p-3 pt-3 text-xs font-mono placeholder-zinc-700" 
                        placeholder="Image URL or description..."
                        data-id="${i}"
                    >
                </div>
                `;
            }
            container.innerHTML = html;
        }

        function attachListeners() {
            // Select all relevant inputs including the new select boxes and checkbox
            const inputs = document.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                input.addEventListener('input', updateOutput);
                input.addEventListener('change', updateOutput); // For selects and checkboxes
            });
        }

        function updateOutput() {
            // 1. Gather Data
            const mainPrompt = document.getElementById('mainPrompt').value.trim();
            const style = document.getElementById('stylePrompt').value.trim();
            const negative = document.getElementById('negPrompt').value.trim();
            const ar = document.getElementById('aspectRatio').value;

            // Camera Specs
            const lens = document.getElementById('camLens').value;
            const aperture = document.getElementById('camAperture').value;
            const angle = document.getElementById('camAngle').value;
            const res = document.getElementById('camRes').value;
            
            // Realism Toggle
            const isRealismOn = document.getElementById('realismToggle').checked;

            // 2. Gather References
            const refInputs = document.querySelectorAll('.ref-input');
            let references = [];
            refInputs.forEach(input => {
                if (input.value.trim() !== '') {
                    references.push(input.value.trim());
                }
            });

            // 3. Construct the Prompt
            let segments = [];

            if (mainPrompt) segments.push(`**PROMPT:** ${mainPrompt}`);
            if (style) segments.push(`**STYLE:** ${style}`);
            
            // Build Tech Stack String
            let techStack = [];
            if (lens) techStack.push(lens);
            if (aperture) techStack.push(`aperture ${aperture}`);
            if (angle) techStack.push(angle);
            if (res) techStack.push(res);
            
            if (techStack.length > 0) {
                segments.push(`**CAMERA SETUP:** ${techStack.join(', ')}`);
            }

            // Realism Injection
            if (isRealismOn) {
                segments.push(`**PHOTOREALISM:** ${REALISM_TEXT}`);
            }
            
            if (references.length > 0) {
                const refList = references.map((ref, idx) => `[${idx+1}] ${ref}`).join(' ');
                segments.push(`**REFERENCES (${references.length}):** ${refList}`);
            }

            if (negative) segments.push(`**NEGATIVE:** ${negative}`);
            if (ar) segments.push(`**PARAMS:** ${ar}`);

            // 4. Join segments
            const finalString = segments.join('\n\n');

            // 5. Update UI
            const outputEl = document.getElementById('finalOutput');
            outputEl.value = finalString;
            
            // Update char count
            document.getElementById('charCount').innerText = `${finalString.length} chars`;
        }

        function copyToClipboard() {
            const outputEl = document.getElementById('finalOutput');
            outputEl.select();
            document.execCommand('copy');
            
            const btn = document.querySelector('button[onclick="copyToClipboard()"]');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = `<span class="text-green-800">Copied!</span>`;
            btn.classList.add('bg-green-400', 'text-green-900');
            btn.classList.remove('bg-yellow-400');
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.classList.remove('bg-green-400', 'text-green-900');
                btn.classList.add('bg-yellow-400');
            }, 1500);
        }

        function clearAll() {
            if(confirm('Clear all fields?')) {
                document.querySelectorAll('input[type="text"], textarea').forEach(el => el.value = '');
                document.querySelectorAll('select').forEach(el => el.selectedIndex = 0);
                document.getElementById('realismToggle').checked = false;
                updateOutput();
            }
        }
    </script>
</body>
</html>
